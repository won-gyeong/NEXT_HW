{% extends 'blog/base.html' %}

{% block css %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'detail.css' %}" />
{% endblock %} 

{% block title %} DETAIL {% endblock %} 

{% block content %}
  <body>
    <div class="all">
        <div id="title">
          <h2>📍TITLE</h2>
          <p class="detail">{{post.title}}</p>
        </div>

        <div id="content">
          <h2>✨CONTENT</h2>
          <p class="detail">{{post.content}}</p>
        </div>
      <br />

        <div id="dead">
          <h2>🗓️UNTIL</h2>
          <p class="detail">{{post.deadline}}</p>
        </div>

      <!-- comments 섹션 -->
      <div class="comments">
        <form method="POST">
          {% csrf_token %}
          <input type="text" name="content" placeholder="댓글 입력">
          <button type="submit">작성하기</button>
        </form>

        <div id="comment">
          {% for comment in post.comments.all %}
          <li>{{comment.content}}</li>
          {% if user.pk == comment.author.pk and user.is_authenticated %}
          <a href="{% url 'delete_comment' post.id comment.id %}">댓글 삭제</a>
          {% endif %}
        </div>
        

        <div class="recomment" style="margin-left: 100px;">
          {% for recomment in comment.recomments.all %}
          <li style="list-style-type: none;"> - {{recomment.content}}</li>
          {% endfor %}
        </div>

        <form action="{% url 'recomment' post.id comment.id %}" method="POST">
          {% csrf_token %}
          <input type="text" name="content" placeholder="대댓글 입력">
          <button type="submit">작성하기</button>
        </form>
        {% endfor %}
      </div> 
      <br />
    <br />
    <div>
      <a href="{% url 'blog:home'%}">🏠HOME</a> <br /><br />
      {% if user.is_authenticated and user.pk == post.author.pk %}
      <a href="{% url 'blog:update' post.id %}">🔧EDIT</a><br /><br />
      <a href="{% url 'blog:delete' post.id %}">💣DELETE</a>
      {% endif %}
    </div>
    {% endblock %}
    <br>
    <br>
    <br>
    {% block footer %} copyright 2023. 원경 all rights reserved {% endblock %}
  </body>
</html>
